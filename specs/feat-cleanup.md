# feat-cleanup: Clean Generated Artifacts

Goal: Implement `agents clean` to remove generated artifacts that are safe to delete.

Depends on: feat-matwiz, feat-stamps
Unblocks: feat-doctor

## Deliverables
- `Cleaner` that identifies and deletes generated files for a given agent.
- Deletes only files that are stamped as generated by this tool.

## Implementation Plan
- [ ] Identify deletable files
  - [ ] Input:
    - [ ] repo root
    - [ ] target agent id (optional; if absent, clean all known adapters)
  - [ ] Build an `OutputPlan` for the agent(s)
  - [ ] For each planned output path:
    - [ ] if file exists:
      - [ ] parse stamp
      - [ ] if generated by this tool: eligible
      - [ ] else: skip and record as unmanaged

- [ ] Delete behavior
  - [ ] Support `--dry-run` (optional but recommended)
  - [ ] When deleting:
    - [ ] delete file
    - [ ] prune empty parent directories up to repo root (best-effort)
  - [ ] Never delete directories that contain unmanaged files

- [ ] Safety checks
  - [ ] Require confirmation if policy says delete requires confirmation
  - [ ] Never delete outside repo root

- [ ] Reporting
  - [ ] Print list of deleted paths
  - [ ] Print list of skipped paths and why (unmanaged/no stamp)

- [ ] Tests
  - [ ] Deletes stamped file
  - [ ] Does not delete unmanaged file at same path
  - [ ] Prunes empty dirs

## Verification
- [ ] `agents clean` removes only generated files and is idempotent
