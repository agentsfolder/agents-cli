# feat-cleanup: Clean Generated Artifacts

Goal: Implement `agents clean` to remove generated artifacts that are safe to delete.

Depends on: feat-matwiz, feat-stamps
Unblocks: feat-doctor

## Deliverables
- `Cleaner` that identifies and deletes generated files for a given agent.
- Deletes only files that are stamped as generated by this tool.

## Implementation Plan
- [x] Identify deletable files
  - [x] Input:
    - [x] repo root
    - [x] target agent id (optional; if absent, clean all known adapters)
  - [x] Build an `OutputPlan` for the agent(s)
  - [x] For each planned output path:
    - [x] if file exists:
      - [x] parse stamp
      - [x] if generated by this tool: eligible
      - [x] else: skip and record as unmanaged

- [x] Delete behavior
  - [x] Support `--dry-run` (optional but recommended)
  - [x] When deleting:
    - [x] delete file
    - [x] prune empty parent directories up to repo root (best-effort)
  - [x] Never delete directories that contain unmanaged files

- [x] Safety checks
  - [x] Require confirmation if policy says delete requires confirmation
  - [x] Never delete outside repo root

- [x] Reporting
  - [x] Print list of deleted paths
  - [x] Print list of skipped paths and why (unmanaged/no stamp)

- [x] Tests
  - [x] Deletes stamped file
  - [x] Does not delete unmanaged file at same path
  - [x] Prunes empty dirs

## Verification
- [x] `agents clean` removes only generated files and is idempotent
