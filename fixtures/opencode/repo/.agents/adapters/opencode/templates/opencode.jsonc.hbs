// Generated by agents.
// Rules are in AGENTS.md (OpenCode also supports CLAUDE.md/CONTEXT.md fallbacks).
{
  "$schema": "https://opencode.ai/config.json",

  // Load project rules explicitly (in addition to OpenCode's built-in AGENTS.md discovery).
  "instructions": ["AGENTS.md"],

  // Non-standard fields for traceability.
  "x_agents": {
    "backend": "{{backend}}",
    "mode": "{{generation.stamp.mode}}",
    "policy": "{{effective.policy.id}}"{{#if profile}},
    "profile": "{{profile}}"{{/if}}
  },

  // Policy is enforced by agents; OpenCode treats this as informational.
  "x_agents_policy": {
    "allow": [
{{#each effective.policy.paths.allow}}      "{{this}}"{{#unless @last}},{{/unless}}
{{/each}}    ],
    "deny": [
{{#each effective.policy.paths.deny}}      "{{this}}"{{#unless @last}},{{/unless}}
{{/each}}    ]
  }{{#if effective.mode.frontmatter.toolIntent}},

  // Mode tool intent is enforced by agents; OpenCode treats this as informational.
  "x_agents_tool_intent": {
    "allow": [
{{#each effective.mode.frontmatter.toolIntent.allow}}      "{{this}}"{{#unless @last}},{{/unless}}
{{/each}}    ],
    "deny": [
{{#each effective.mode.frontmatter.toolIntent.deny}}      "{{this}}"{{#unless @last}},{{/unless}}
{{/each}}    ]
  }{{/if}}
}
